
import uploadFile from '../lib/uploadFile.js'
import uploadImage from '../lib/uploadImage.js'

let handler = async (m, { conn, text, usedPrefix, command }) => {
	let fdoc = {quoted:{key : {participant : '0@s.whatsapp.net'},message: {documentMessage: {title: `${command}`}}}}

    let q = m.quoted ? m.quoted : m
  let mime = (q.msg || q).mimetype || ''
  if (!mime) throw 'Fotonya Mana?'
  if (!/image\/(jpe?g|png)/.test(mime)) throw `Tipe ${mime} tidak didukung!`
    if (!text) return m.reply(`Balas gambar dengan perintah
    ${usedPrefix + command} effect
ê’¦ Í ê’· Í ê’¦ Í ê’· Í ê’¦ Í ê’· Í ê’¦ Í ê’· Í ê’¦ Í ê’· Í ê’¦ Í ê’· Í ê’¦ Í ê’· Í ê’¦ê’· Í ê’¦ê’· Í ê’¦
ââ€“â€“â€“â€“â€“â€“ã€Ž *List Efek* ã€â€“â€“â€“â€“â€“â€“
â”‚âœ§ 2colors-canvas
â”‚âœ§ 3d-wall
â”‚âœ§ 100_dollars
â”‚âœ§ abstract-rays
â”‚âœ§ airbrush
â”‚âœ§ angry_granny
â”‚âœ§ apples
â”‚âœ§ applying_makeup
â”‚âœ§ aqua
â”‚âœ§ art-admirer
â”‚âœ§ art-experts
â”‚âœ§ artist
â”‚âœ§ artistic-filter
â”‚âœ§ artist_in_the_dark
â”‚âœ§ art_exhibition
â”‚âœ§ art_gallery
â”‚âœ§ art_painting
â”‚âœ§ aruga
â”‚âœ§ at-the-beach
â”‚âœ§ at-the-gallery
â”‚âœ§ aurora
â”‚âœ§ auto-enhance
â”‚âœ§ autumn-frame
â”‚âœ§ ax
â”‚âœ§ bad_santa
â”‚âœ§ bathe
â”‚âœ§ beauty-boost
â”‚âœ§ behind_the_fence
â”‚âœ§ bicycle
â”‚âœ§ biker
â”‚âœ§ billboard
â”‚âœ§ billboard_workers
â”‚âœ§ black-and-white-mural
â”‚âœ§ black-mamba
â”‚âœ§ black-pen
â”‚âœ§ black-pencils
â”‚âœ§ blueprint
â”‚âœ§ boardings
â”‚âœ§ bodybuilder
â”‚âœ§ brass-frame
â”‚âœ§ bricks
â”‚âœ§ bride
â”‚âœ§ bride_in_grass
â”‚âœ§ broadway
â”‚âœ§ brugge
â”‚âœ§ brush-strokes
â”‚âœ§ bubbles
â”‚âœ§ building_painters
â”‚âœ§ bunnies
â”‚âœ§ bunny_ears
â”‚âœ§ burned-bread
â”‚âœ§ burning-fire
â”‚âœ§ cafe
â”‚âœ§ canvas
â”‚âœ§ cappuccino
â”‚âœ§ captivity
â”‚âœ§ card-with-flowers
â”‚âœ§ cartoon
â”‚âœ§ cartoonizer
â”‚âœ§ castle
â”‚âœ§ champagne
â”‚âœ§ che-guevara
â”‚âœ§ chinese_opera
â”‚âœ§ christmass_tree_balls
â”‚âœ§ chris_pirillo
â”‚âœ§ cinema
â”‚âœ§ circle-of-colors
â”‚âœ§ city-billboard
â”‚âœ§ city
â”‚âœ§ citylight
â”‚âœ§ clasiketch
â”‚âœ§ classic-art
â”‚âœ§ coal-sketch
â”‚âœ§ coffee_break
â”‚âœ§ color-checkers
â”‚âœ§ colored-pencils
â”‚âœ§ colored-pens
â”‚âœ§ colored-sketch
â”‚âœ§ colored-squares
â”‚âœ§ colored-texture
â”‚âœ§ colorful-tiles
â”‚âœ§ colorful-wood
â”‚âœ§ coloring-book
â”‚âœ§ coloured-pencils
â”‚âœ§ comic-book
â”‚âœ§ comics!-boom
â”‚âœ§ concrete-jungle
â”‚âœ§ cotton-candy
â”‚âœ§ crayola
â”‚âœ§ crooked_gambler
â”‚âœ§ crown
â”‚âœ§ cupid
â”‚âœ§ cutout
â”‚âœ§ death_proof
â”‚âœ§ deep-blue
â”‚âœ§ dj
â”‚âœ§ dollar
â”‚âœ§ doodle-sketch
â”‚âœ§ dots
â”‚âœ§ draft
â”‚âœ§ drawing-photo
â”‚âœ§ drawing
â”‚âœ§ drawing_near_the_sea
â”‚âœ§ dreamy-sky
â”‚âœ§ drizzle
â”‚âœ§ drops
â”‚âœ§ easter-flowers
â”‚âœ§ easter-frame
â”‚âœ§ easter
â”‚âœ§ equestrienne
â”‚âœ§ esquire
â”‚âœ§ ethanol
â”‚âœ§ etude
â”‚âœ§ evening-billboard
â”‚âœ§ explorer-drawing
â”‚âœ§ eye
â”‚âœ§ family_in_museum
â”‚âœ§ famous-gallery
â”‚âœ§ female_gambler
â”‚âœ§ female_soldier
â”‚âœ§ film-strip
â”‚âœ§ film_scan
â”‚âœ§ fire
â”‚âœ§ fireplace
â”‚âœ§ flood
â”‚âœ§ flower_frame
â”‚âœ§ football-field
â”‚âœ§ frame
â”‚âœ§ frame_and_roses
â”‚âœ§ frankenstein-monster
â”‚âœ§ frosty_window
â”‚âœ§ galatea
â”‚âœ§ galaxy
â”‚âœ§ galeries_lafayette
â”‚âœ§ gallery-visitor
â”‚âœ§ gas_mask_freaks
â”‚âœ§ gentle-painting
â”‚âœ§ ghostwood
â”‚âœ§ giant-artwork
â”‚âœ§ girl-with-bicycle
â”‚âœ§ girls_with_poster
â”‚âœ§ glamour
â”‚âœ§ glass
â”‚âœ§ glossy-cartoon
â”‚âœ§ glowing-circles
â”‚âœ§ goalkeeper
â”‚âœ§ goats
â”‚âœ§ godfather
â”‚âœ§ golden-brown
â”‚âœ§ golden_valentine
â”‚âœ§ good_luck_chuck
â”‚âœ§ graffiti
â”‚âœ§ graffiti_artist
â”‚âœ§ graffiti_billboard
â”‚âœ§ graffiti_wall
â”‚âœ§ greenwich
â”‚âœ§ halloween-pumpkins
â”‚âœ§ halo
â”‚âœ§ hammock
â”‚âœ§ harley-davidson
â”‚âœ§ heart_locket
â”‚âœ§ hockey
â”‚âœ§ hockey_team
â”‚âœ§ huge_billboard
â”‚âœ§ icecream
â”‚âœ§ impressionists
â”‚âœ§ in-the-cinema
â”‚âœ§ in-the-woods
â”‚âœ§ indian_beauty
â”‚âœ§ ink-pen
â”‚âœ§ ink-portrait
â”‚âœ§ ink-wash
â”‚âœ§ jigsaw_puzzle
â”‚âœ§ juice
â”‚âœ§ kitty-and-frame
â”‚âœ§ kitty
â”‚âœ§ knight-with-sword
â”‚âœ§ knight
â”‚âœ§ lake
â”‚âœ§ large_painting
â”‚âœ§ last_advert
â”‚âœ§ late_autumn
â”‚âœ§ latte-art
â”‚âœ§ lavander
â”‚âœ§ leftfield
â”‚âœ§ lego
â”‚âœ§ lego_portrait
â”‚âœ§ lemon-tree
â”‚âœ§ lenin
â”‚âœ§ library
â”‚âœ§ local_shop
â”‚âœ§ london_calling
â”‚âœ§ louvre
â”‚âœ§ love-letter
â”‚âœ§ mac-solarize
â”‚âœ§ madonna
â”‚âœ§ magazine-comics
â”‚âœ§ magic-stars
â”‚âœ§ magnetic-sketchpad
â”‚âœ§ male_gambler
â”‚âœ§ marilyn_autograph
â”‚âœ§ marilyn_monroe
â”‚âœ§ master-sketch
â”‚âœ§ medieval_art
â”‚âœ§ melbourne-gallery
â”‚âœ§ memories
â”‚âœ§ mermaid
â”‚âœ§ metalic-grain
â”‚âœ§ midnight_billboard
â”‚âœ§ mini_cooper
â”‚âœ§ mint_frame
â”‚âœ§ mirror
â”‚âœ§ modern_art_exhibition
â”‚âœ§ moist
â”‚âœ§ mona_lisa
â”‚âœ§ mosaic-sketch
â”‚âœ§ mount_rushmore
â”‚âœ§ museum
â”‚âœ§ museum_kid
â”‚âœ§ mysterious_painting
â”‚âœ§ napkine
â”‚âœ§ national-gallery-in-london
â”‚âœ§ negative-smoke
â”‚âœ§ new-year-frames
â”‚âœ§ new-york-street
â”‚âœ§ newspaper
â”‚âœ§ new_york
â”‚âœ§ night
â”‚âœ§ night_city
â”‚âœ§ night_ride
â”‚âœ§ night_street
â”‚âœ§ night_walk
â”‚âœ§ nostalgic-frame
â”‚âœ§ notebook
â”‚âœ§ nyc
â”‚âœ§ ny_taxis
â”‚âœ§ obama
â”‚âœ§ ocean
â”‚âœ§ odessa_opera_house
â”‚âœ§ oil_painting
â”‚âœ§ old-camera
â”‚âœ§ old-dream
â”‚âœ§ old-letter
â”‚âœ§ old-photo
â”‚âœ§ old-screen
â”‚âœ§ old_book
â”‚âœ§ on_the_moon
â”‚âœ§ on_the_mountain
â”‚âœ§ ophelia
â”‚âœ§ orion
â”‚âœ§ ornament
â”‚âœ§ osaka
â”‚âœ§ oxford
â”‚âœ§ paint-brush
â”‚âœ§ painter_at_work
â”‚âœ§ painting-and-sketches
â”‚âœ§ paints-crafts
â”‚âœ§ paintwash
â”‚âœ§ parchment
â”‚âœ§ paris_hilton
â”‚âœ§ passage
â”‚âœ§ passing-by-the-painting
â”‚âœ§ pastel
â”‚âœ§ pavement_art
â”‚âœ§ pavement_artist
â”‚âœ§ pavement_drawing
â”‚âœ§ pedestrian-crossing
â”‚âœ§ peeling
â”‚âœ§ pencil-sketch
â”‚âœ§ pencils-canvas
â”‚âœ§ perfume_shop
â”‚âœ§ picadilly_circus
â”‚âœ§ piccadilly-arcade
â”‚âœ§ pictures_sale
â”‚âœ§ picture_at_the_gallery
â”‚âœ§ pilot
â”‚âœ§ pink-panther
â”‚âœ§ pinkify
â”‚âœ§ pisa_street
â”‚âœ§ playful-cat
â”‚âœ§ polaroid_dress
â”‚âœ§ portrait
â”‚âœ§ portrait_on_the_wall
â”‚âœ§ posterize
â”‚âœ§ posters
â”‚âœ§ press-comics
â”‚âœ§ press_conference
â”‚âœ§ prince_of_wales_theatre
â”‚âœ§ pumpkins
â”‚âœ§ puppy-with-frame
â”‚âœ§ purple-haze
â”‚âœ§ purple_sky
â”‚âœ§ putin
â”‚âœ§ puzzle
â”‚âœ§ rainbow
â”‚âœ§ rainwater
â”‚âœ§ rainy-night
â”‚âœ§ rainy_day
â”‚âœ§ reconstruction
â”‚âœ§ red-and-blue
â”‚âœ§ red-lights
â”‚âœ§ red-wine
â”‚âœ§ reflection
â”‚âœ§ replacing_billboard_advert
â”‚âœ§ reproduction
â”‚âœ§ retail_park
â”‚âœ§ retro-black
â”‚âœ§ retro-comic
â”‚âœ§ rinse
â”‚âœ§ riverside_billboard
â”‚âœ§ romantic_etude
â”‚âœ§ roses-and-marshmallows
â”‚âœ§ roses
â”‚âœ§ scratched-photo
â”‚âœ§ scribble
â”‚âœ§ scroll
â”‚âœ§ sharp-paint
â”‚âœ§ shine-stripes
â”‚âœ§ shiny-color
â”‚âœ§ shooting-stars
â”‚âœ§ shopping-arcade
â”‚âœ§ shopping_center
â”‚âœ§ shop_poster
â”‚âœ§ sidewalk
â”‚âœ§ singer
â”‚âœ§ sip
â”‚âœ§ sketch-practicing
â”‚âœ§ skydiver
â”‚âœ§ snowboard
â”‚âœ§ snow_in_london
â”‚âœ§ soak
â”‚âœ§ soda
â”‚âœ§ solarization
â”‚âœ§ soppy
â”‚âœ§ sparklers
â”‚âœ§ sparkles
â”‚âœ§ sparkling-snow
â”‚âœ§ special_billboard
â”‚âœ§ sphinx
â”‚âœ§ spray
â”‚âœ§ spring-flowers
â”‚âœ§ spring_memories
â”‚âœ§ stacco
â”‚âœ§ stadium
â”‚âœ§ stardust
â”‚âœ§ stars
â”‚âœ§ static-noise
â”‚âœ§ stencil
â”‚âœ§ stone-age
â”‚âœ§ street_artist
â”‚âœ§ street_exhibition
â”‚âœ§ striped-jeans
â”‚âœ§ summer-dust
â”‚âœ§ summoning-spirits
â”‚âœ§ sunburst
â”‚âœ§ sunray
â”‚âœ§ superman
â”‚âœ§ supernova
â”‚âœ§ surfer
â”‚âœ§ swedish_billboard
â”‚âœ§ tablet
â”‚âœ§ taipei
â”‚âœ§ the-frame
â”‚âœ§ the_first_man_on_the_moon
â”‚âœ§ the_gun
â”‚âœ§ the_kiss
â”‚âœ§ tintbrush
â”‚âœ§ tokyo-crossing
â”‚âœ§ toonic
â”‚âœ§ torn_billboard
â”‚âœ§ traffic-lights
â”‚âœ§ train-station-poster
â”‚âœ§ train_station
â”‚âœ§ tram
â”‚âœ§ travellers-sketch
â”‚âœ§ triangular
â”‚âœ§ truck-advert
â”‚âœ§ truck
â”‚âœ§ tub
â”‚âœ§ tulips
â”‚âœ§ tv_girl
â”‚âœ§ twilight
â”‚âœ§ two_cats
â”‚âœ§ two_female_fans
â”‚âœ§ ultra-paint
â”‚âœ§ underground-poster
â”‚âœ§ urban
â”‚âœ§ urban_billboard
â”‚âœ§ vhs
â”‚âœ§ vibration
â”‚âœ§ victoria_beckham
â”‚âœ§ video-game
â”‚âœ§ vintage-photos
â”‚âœ§ vintage-scooter
â”‚âœ§ vintage_frame
â”‚âœ§ vintage_table
â”‚âœ§ vitrage-window
â”‚âœ§ vogue
â”‚âœ§ wall-mural
â”‚âœ§ wall-painting
â”‚âœ§ wall-poster
â”‚âœ§ wall
â”‚âœ§ wall_banner
â”‚âœ§ wall_painting
â”‚âœ§ wanted_wizard
â”‚âœ§ warhol-dots
â”‚âœ§ warhol
â”‚âœ§ warrior
â”‚âœ§ watchinng
â”‚âœ§ watercolor
â”‚âœ§ watercolour-painting
â”‚âœ§ watercolours
â”‚âœ§ waterway
â”‚âœ§ waves
â”‚âœ§ wayback
â”‚âœ§ weave
â”‚âœ§ wedding-day
â”‚âœ§ wet
â”‚âœ§ wild-brush
â”‚âœ§ wine-label
â”‚âœ§ winter-princess
â”‚âœ§ witch
â”‚âœ§ woman_pilot
â”‚âœ§ wood
â”‚âœ§ worker-by-the-billboard
â”‚âœ§ woven-sketch
â”‚âœ§ xmas_tree
â”‚âœ§ yellow_wall
â”‚âœ§ yo
â”—â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“âœ¦`)
    let img = await q.download?.()
    let url = await uploadImage(img)
    
    let images = `https://violetics.pw/api/photomaker/${encodeURIComponent(text)}?apikey=beta&image=${encodeURIComponent(url)}`
    let caption = `*âŽ”â”‰â”ã€Œ ${command} ã€â”â”‰âŽ”*
ðŸ¤  *Query* : ${url}`
  await conn.sendButton(m.chat, caption, wm, images, [
                ['Next', `${usedPrefix + command}`],
                ['Menu', `${usedPrefix}menu`]
            ], m, fdoc)
            }
//lo mau apa??
handler.help = ['phmaker'].map(v => v + ' <caption|reply>')
handler.tags = ['maker']
handler.command = /^(phmaker)$/i

export default handler

const isUrl = (text) => {
  return text.match(new RegExp(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&/=]*)(jpe?g|gif|png)/, 'gi'))
}